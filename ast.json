[{"type":"Script","directives":[],"statements":[{"type":"VariableDeclarationStatement","declaration":{"type":"VariableDeclaration","kind":"const","declarators":[{"type":"VariableDeclarator","binding":{"type":"BindingIdentifier","name":"getStdin"},"init":{"type":"CallExpression","callee":{"type":"IdentifierExpression","name":"require"},"arguments":[{"type":"LiteralStringExpression","value":"get-stdin"}]}}]}},{"type":"VariableDeclarationStatement","declaration":{"type":"VariableDeclaration","kind":"const","declarators":[{"type":"VariableDeclarator","binding":{"type":"BindingIdentifier","name":"codegen"},"init":{"type":"StaticMemberExpression","object":{"type":"CallExpression","callee":{"type":"IdentifierExpression","name":"require"},"arguments":[{"type":"LiteralStringExpression","value":"shift-codegen"}]},"property":"default"}}]}},{"type":"VariableDeclarationStatement","declaration":{"type":"VariableDeclaration","kind":"const","declarators":[{"type":"VariableDeclarator","binding":{"type":"BindingIdentifier","name":"FormattedCodeGen"},"init":{"type":"StaticMemberExpression","object":{"type":"CallExpression","callee":{"type":"IdentifierExpression","name":"require"},"arguments":[{"type":"LiteralStringExpression","value":"shift-codegen"}]},"property":"FormattedCodeGen"}}]}},{"type":"VariableDeclarationStatement","declaration":{"type":"VariableDeclaration","kind":"let","declarators":[{"type":"VariableDeclarator","binding":{"type":"BindingIdentifier","name":"fileContents"},"init":null}]}},{"type":"VariableDeclarationStatement","declaration":{"type":"VariableDeclaration","kind":"let","declarators":[{"type":"VariableDeclarator","binding":{"type":"BindingIdentifier","name":"args"},"init":{"type":"CallExpression","callee":{"type":"StaticMemberExpression","object":{"type":"StaticMemberExpression","object":{"type":"IdentifierExpression","name":"process"},"property":"argv"},"property":"slice"},"arguments":[{"type":"LiteralNumericExpression","value":2}]}}]}},{"type":"FunctionDeclaration","isAsync":false,"isGenerator":false,"name":{"type":"BindingIdentifier","name":"printUsage"},"params":{"type":"FormalParameters","items":[{"type":"BindingWithDefault","binding":{"type":"BindingIdentifier","name":"code"},"init":{"type":"LiteralNumericExpression","value":0}}],"rest":null},"body":{"type":"FunctionBody","directives":[],"statements":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"StaticMemberExpression","object":{"type":"IdentifierExpression","name":"console"},"property":"log"},"arguments":[{"type":"TemplateExpression","tag":null,"elements":[{"type":"TemplateElement","rawValue":"\nUsage: shift-codegen ast.json\n\nIf JSON is piped to shift-codegen then the arguments are ignored\n"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"StaticMemberExpression","object":{"type":"IdentifierExpression","name":"process"},"property":"exit"},"arguments":[{"type":"IdentifierExpression","name":"code"}]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"ArrowExpression","isAsync":true,"params":{"type":"FormalParameters","items":[],"rest":null},"body":{"type":"FunctionBody","directives":[],"statements":[{"type":"IfStatement","test":{"type":"StaticMemberExpression","object":{"type":"StaticMemberExpression","object":{"type":"IdentifierExpression","name":"process"},"property":"stdin"},"property":"isTTY"},"consequent":{"type":"BlockStatement","block":{"type":"Block","statements":[{"type":"VariableDeclarationStatement","declaration":{"type":"VariableDeclaration","kind":"const","declarators":[{"type":"VariableDeclarator","binding":{"type":"BindingIdentifier","name":"file"},"init":{"type":"ComputedMemberExpression","object":{"type":"IdentifierExpression","name":"args"},"expression":{"type":"LiteralNumericExpression","value":0}}}]}},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","operand":{"type":"IdentifierExpression","name":"file"}},"consequent":{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"IdentifierExpression","name":"printUsage"},"arguments":[{"type":"LiteralNumericExpression","value":1}]}},"alternate":null},{"type":"TryCatchStatement","body":{"type":"Block","statements":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","binding":{"type":"AssignmentTargetIdentifier","name":"fileContents"},"expression":{"type":"CallExpression","callee":{"type":"StaticMemberExpression","object":{"type":"CallExpression","callee":{"type":"IdentifierExpression","name":"require"},"arguments":[{"type":"LiteralStringExpression","value":"fs"}]},"property":"readFileSync"},"arguments":[{"type":"IdentifierExpression","name":"file"},{"type":"ObjectExpression","properties":[{"type":"DataProperty","name":{"type":"StaticPropertyName","value":"encoding"},"expression":{"type":"LiteralStringExpression","value":"utf8"}}]}]}}}]},"catchClause":{"type":"CatchClause","binding":{"type":"BindingIdentifier","name":"e"},"body":{"type":"Block","statements":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"StaticMemberExpression","object":{"type":"IdentifierExpression","name":"console"},"property":"error"},"arguments":[{"type":"TemplateExpression","tag":null,"elements":[{"type":"TemplateElement","rawValue":"Can not read file"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"StaticMemberExpression","object":{"type":"IdentifierExpression","name":"process"},"property":"exit"},"arguments":[{"type":"LiteralNumericExpression","value":2}]}}]}}}]}},"alternate":{"type":"BlockStatement","block":{"type":"Block","statements":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","binding":{"type":"AssignmentTargetIdentifier","name":"fileContents"},"expression":{"type":"AwaitExpression","expression":{"type":"CallExpression","callee":{"type":"IdentifierExpression","name":"getStdin"},"arguments":[]}}}},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","operand":{"type":"IdentifierExpression","name":"fileContents"}},"consequent":{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"IdentifierExpression","name":"printUsage"},"arguments":[{"type":"LiteralNumericExpression","value":1}]}},"alternate":null}]}}},{"type":"VariableDeclarationStatement","declaration":{"type":"VariableDeclaration","kind":"let","declarators":[{"type":"VariableDeclarator","binding":{"type":"BindingIdentifier","name":"ast"},"init":null}]}},{"type":"TryCatchStatement","body":{"type":"Block","statements":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","binding":{"type":"AssignmentTargetIdentifier","name":"ast"},"expression":{"type":"CallExpression","callee":{"type":"StaticMemberExpression","object":{"type":"IdentifierExpression","name":"JSON"},"property":"parse"},"arguments":[{"type":"IdentifierExpression","name":"fileContents"}]}}}]},"catchClause":{"type":"CatchClause","binding":{"type":"BindingIdentifier","name":"e"},"body":{"type":"Block","statements":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"StaticMemberExpression","object":{"type":"IdentifierExpression","name":"console"},"property":"error"},"arguments":[{"type":"TemplateExpression","tag":null,"elements":[{"type":"TemplateElement","rawValue":"Could not parse JSON: "},{"type":"StaticMemberExpression","object":{"type":"IdentifierExpression","name":"e"},"property":"description"},{"type":"TemplateElement","rawValue":""}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"StaticMemberExpression","object":{"type":"IdentifierExpression","name":"process"},"property":"exit"},"arguments":[{"type":"LiteralNumericExpression","value":4}]}}]}}},{"type":"TryCatchStatement","body":{"type":"Block","statements":[{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"StaticMemberExpression","object":{"type":"IdentifierExpression","name":"ast"},"property":"length"},"operator":">","right":{"type":"LiteralNumericExpression","value":0}},"consequent":{"type":"BlockStatement","block":{"type":"Block","statements":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"StaticMemberExpression","object":{"type":"IdentifierExpression","name":"ast"},"property":"forEach"},"arguments":[{"type":"ArrowExpression","isAsync":false,"params":{"type":"FormalParameters","items":[{"type":"BindingIdentifier","name":"_"}],"rest":null},"body":{"type":"FunctionBody","directives":[],"statements":[{"type":"VariableDeclarationStatement","declaration":{"type":"VariableDeclaration","kind":"const","declarators":[{"type":"VariableDeclarator","binding":{"type":"BindingIdentifier","name":"formatted"},"init":{"type":"CallExpression","callee":{"type":"IdentifierExpression","name":"codegen"},"arguments":[{"type":"IdentifierExpression","name":"_"},{"type":"NewExpression","callee":{"type":"IdentifierExpression","name":"FormattedCodeGen"},"arguments":[]}]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"StaticMemberExpression","object":{"type":"IdentifierExpression","name":"console"},"property":"log"},"arguments":[{"type":"IdentifierExpression","name":"formatted"}]}}]}}]}}]}},"alternate":{"type":"BlockStatement","block":{"type":"Block","statements":[{"type":"VariableDeclarationStatement","declaration":{"type":"VariableDeclaration","kind":"const","declarators":[{"type":"VariableDeclarator","binding":{"type":"BindingIdentifier","name":"formatted"},"init":{"type":"CallExpression","callee":{"type":"IdentifierExpression","name":"codegen"},"arguments":[{"type":"IdentifierExpression","name":"ast"},{"type":"NewExpression","callee":{"type":"IdentifierExpression","name":"FormattedCodeGen"},"arguments":[]}]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"StaticMemberExpression","object":{"type":"IdentifierExpression","name":"console"},"property":"log"},"arguments":[{"type":"IdentifierExpression","name":"formatted"}]}}]}}}]},"catchClause":{"type":"CatchClause","binding":{"type":"BindingIdentifier","name":"e"},"body":{"type":"Block","statements":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"StaticMemberExpression","object":{"type":"IdentifierExpression","name":"console"},"property":"error"},"arguments":[{"type":"TemplateExpression","tag":null,"elements":[{"type":"TemplateElement","rawValue":"Could not generate JavaScript from JSON: "},{"type":"IdentifierExpression","name":"e"},{"type":"TemplateElement","rawValue":""}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"StaticMemberExpression","object":{"type":"IdentifierExpression","name":"process"},"property":"exit"},"arguments":[{"type":"LiteralNumericExpression","value":3}]}}]}}}]}},"arguments":[]}}]}]
